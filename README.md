# 42_netpractice - гайд без теории, но с кучей примеров.
Посвящается девочкам:P

Статья для понимания основ
https://learn.microsoft.com/en-us/troubleshoot/windows-client/networking/tcpip-addressing-and-subnetting

## Краткое резюме на примерах  
IP адрес состоит из номера подсети и номера хоста. Маска определяет эти две части.  
```
Пример 1:  
Нам выделена сеть 192.168.123.0-192.168.123.255  
Делим ее на подсети с помощью маски 255.255.255.192 (что равно 11111111.11111111.11111111.11000000, CIDR=26 (т.к. 26 единиц))
Почему 192? Это сумма битов (в десятичной системе) из последней часть маски 11000000 (128 + 64)  
Т.о. наша сеть превращается в четыре подсети, каждая подсеть содержит 64 адреса (256-192=64):  
192.168.123.0-192.168.123.63, 192.168.123.64-192.168.123.127, 192.168.123.128-192.168.123.191, 192.168.123.192-192.168.123.255

Пример 2:  
Нам выделена сеть 192.168.123.0-192.168.123.255  
Делим ее на подсети с помощью маски 255.255.255.240 (что равно 11111111.11111111.11111111.11110000, CIDR=28 (т.к. 28 единиц))  
Почему 240? Это сумма битов (в десятичной системе) из последней часть маски 11110000 (128 + 64 + 32 + 16)  
Т.о. наша сеть превращается в 16 подсетей, каждая подсеть содержит 16 адресов (256-240=16):  
192.168.123.0-192.168.123.15, 192.168.123.16-192.168.123.37 и так далее, последняя подсеть 192.168.123.240-192.168.123.255  

Еще примеры:     
IP адрес 126.12.13.2  
при маске 255.255.255.252  -> номер сети 126.12.13, номер хоста 2, входит в подсеть 126.12.13.0 - 126.12.13.3
при маске 255.255.255.192  -> номер сети 126.12.13, номер хоста 2, входит в подсеть 126.12.13.0 - 126.12.13.63
при маске 255.255.255.0  -> номер сети 126.12.13, номер хоста 2, входит в подсеть 126.12.13.0 - 126.12.13.255
IP адрес 126.12.13.254
при маске 255.255.255.252  -> номер сети 126.12.13, номер хоста 254, входит в подсеть 126.12.13.252 - 126.12.13.255
при маске 255.255.255.192  -> номер сети 126.12.13, номер хоста 254, входит в подсеть 126.12.13.192 - 126.12.13.255
при маске 255.255.255.0  -> номер сети 126.12.13, номер хоста 254, входит в подсеть 126.12.13.0 - 126.12.13.255
```

## Что надо запомнить:
```
1. Чтобы узнать "шаг" подсети (= диапазон адресов хостов) нужно вычесть последние цифры маски из 256.
   Примеры:
   маска 255.255.255.252, шаг сети = 4 (256-252), т.о. в каждой подсети 4 адреса (хоста)
   маска 255.255.255.224, шаг сети = 32 (256-224), т.о. в каждой подсети 32 адреса (хоста)
2. Если маска дана в виде CIDR, рисуем такое же количество единичек, остальные нули,
    переводим единицы из последней части маски в двоичную систему.
   Примеры:
   CIDR=32, значит в маске все единицы 11111111.11111111.11111111.11111111 (переводим в двоичную 128+64+32+16+8+4+2+1=255)
   CIDR=29, значит в маске 29 единиц 11111111.11111111.11111111.11111000 (переводим в двоичную 128+64+32+16+8+0+0+0=248)
   CIDR=25, значит в маске 25 единиц 11111111.11111111.11111111.10000000 (переводим в двоичную 128+0+0+0+0+0+0+0=128)
3. Из диапазона адресов в подсети нельзя использовать первый и последний,
    первый зарезервирован для указания на саму сеть, последний - широковещательный.
   Пример: при маске 255.255.255.252 и подсети 126.12.13.0-126.12.13.3,
    можно использовать только два адреса 126.12.13.1 и 126.12.13.2
4. Есть три диапазона адресов, выделенных для частных сетей, их нельзя использовать в уровнях, где есть выход в интернет.
   Вот они:
   10.0.0.0-10.255.255.255
   172.16.0.0.-172.31.255.255
   192.168.0.0.-192.168.255.255
   И также нельзя использовать IP, начинающийся на 127, это "спец" адреса (loopback).
```

Базовая таблица 
|CIDR| Маска           | Кол-во IP на подсеть (=шаг подсети)  | Кол-во подсетей | Подсети (диапазон адресов хостов в каждой подсети               |
| ---|:---------------|:---------|:-------|:--------------------------------------------------------------------------------|
| 32 | 255.255.255.255 | 1 (=256-255)    | 256      | в проекте не используем                                             |
| 31 | 255.255.255.254 | 2 (=256-254)    | 128      | в проекте не используем                                             |
| 30 | 255.255.255.252 | 4 (=256-252)    | 64       | .0-.3, .4-.7, .8-.11, ... , .252-.255         |
| 29 | 255.255.255.248 | 8 (=256-248)    | 32       | .0-.7, .8-.15, .16-.23, ... , .248-.255       |
| 28 | 255.255.255.240 | 16 (=256-240)   | 16       | .0-.15, .16-.31, .32-.47, ... , .240-.255     |
| 27 | 255.255.255.224 | 32 (=256-224)   | 8        | .0-.31, .32-.63, .64-.95, ... , .224-.255     |
| 26 | 255.255.255.192 | 64 (=256-192)   | 4        | .0-.63, .64-.127, .128-.191, .192-.255        |
| 25 | 255.255.255.128 | 128 (=256-128)  | 2        | .0-.127, .128-.255                            |
| 24 | 255.255.255.0   | 256 (=256-0)    | 1        | .0-.255                                       |

<details>
<summary>
Level 1
</summary>

### Level 1
![level1](https://github.com/annfike/42_netpractice/assets/44573387/7622f662-afcb-4fd6-9d5f-b9bb73a27b0c)
```
Сеть слева - нам дана маска 255.255.255.0, это значит, что диапазон адресов в нашей подсети будет .0-.255
и мы можем использовать любой из них (кроме первого и последнего).
IP B1 = 104.95.23.12, таким образом IP A1 может быть любым из диапазона 104.95.23.1-104.95.23.254,
например 104.95.23.13 (проще брать соседний для наглядности)

Сеть справа - выбираем адрес из диапазона 211.191.0.1 - 211.191.255.254, например 211.191.165.76
```

</details>

<details>
<summary>
Level 2
</summary>
  
### Level 2
![level2](https://github.com/annfike/42_netpractice/assets/44573387/a9639529-b6b8-4aa0-aa08-fef740366ee7)
```
Сеть слева - нам дана маска 255.255.255.224 (у Interface B1 тоже ставим эту маску),
это значит, что у подсети шаг=32 (256-224) (32 адреса в каждой подсети).
IP B1 = 192.168.38.222, считаем "ближайшие" к этому адресу подсети, начинаем "сверху":
192.168.38.224-192.168.38.255 и 192.168.38.192-192.168.38.223 (именно в эту входит наш IP B1 = 192.168.38.222) .
Таким образом IP A1 может быть 192.168.38.221 (223 нельзя, так как это последний (широковещательный) адрес в подсети)    

Сеть справа - маска 255.255.255.252 или /30, что одно и то же. 
Мы можем выбирать адреса (кроме первого и последнего) из любой подсети (.0-.3, .4-.7, .8-.11, ... , .252-.255)  
IP, начинающийся на 127, использовать нельзя - это "спец" адреса (loopback).
Мы можем взять, например, 126.0.0.1 и 126.0.0.2
```
Решение:

![level2_](https://github.com/annfike/42_netpractice/assets/44573387/5ff01a7d-a751-4a73-9cc2-c468ab7f6aa4)

</details>

<details>
<summary>
Level 3
</summary>

### Level 3
![level3](https://github.com/annfike/42_netpractice/assets/44573387/0eb476e3-b651-4094-bc69-8dab6dfe2804)
```
У нас есть switch, он соединяет компьютеры (хосты) в одной сети.
Нам дана маска 255.255.255.128 (везде ее ставим), это значит нам доступны две подсети .0-.127, .128-.255 
И нам дан IP 104.198.209.125, он входит в первую подсеть (.0-.127).
Для двух других хостов выбираем адреса из этого диапазона.
```
Решение:
![image](https://github.com/annfike/42_netpractice/assets/44573387/702c962d-4dff-4859-859e-834385f84e93)

</details>

<details>
<summary>
Level 4
</summary>
  
### Level 4
![image](https://github.com/annfike/42_netpractice/assets/44573387/68193cd8-f6e1-4cfb-8a2d-335218142f6b)
```
У нас есть router, он соединяет устройства из разных (!) сетей.
С помощью interface R2 и interface R3 нам показано, какие подсети уже заняты.
interface R2: маска 255.255.255.128, IP 103.137.112.1, т.о. занята подсеть 103.137.112.0-103.137.112.127
interface R3: маска 255.255.255.192, IP 103.137.112.244, т.о. занята подсеть 103.137.112.192-103.137.112.255
В "нашей" сети (interface R1) нам дан IP 103.137.112.132, нам нужно два "свободных" адреса, подойдут 133 и 134
и маска, например, 255.255.255.192. Она дает нам подсети .0-.63, .64-.127, .128-.191, .192-.255,
первые две заняты interface R2, последняя занята interface R3, нам остается диапазон .128-.191
```
Решение:
![image](https://github.com/annfike/42_netpractice/assets/44573387/252a5c5c-1de5-47c9-afb2-af1b4bdf4d40)

</details>

<details>
<summary>
Level 5
</summary>
  
### Level 5
![image](https://github.com/annfike/42_netpractice/assets/44573387/b5774e40-42d9-4eff-b076-295358784f35)
```
interface R1: IP 64.177.179.126 Mask 255.255.255.128, для interface A1 выбираем из .0-.127
Тут появляется таблица маршрутизации.
Слева - какие хосты нам надо найти (в нашем случае все ,что равно 0.0.0.0/0 или default),
справа через какой роутер нам их надо найти (ставим туда IP interface R1)

interface R2: IP 142.125.125.254 Mask 255.255.192.0, для interface B1 выбираем из 142.125.0.0 - 142.125.255.255
Совет - всегда берите соседний, просто проверяйте, чтобы он входил в ту же подсеть.
В таблице маршрутизации слева default,
справа через какой роутер нам надо найти (ставим туда IP interface R2)

```
Решение:
![image](https://github.com/annfike/42_netpractice/assets/44573387/d59790a5-92be-47e6-a614-3a677a4f7587)

</details>

<details>
<summary>
Level 6
</summary>
  
### Level 6
![image](https://github.com/annfike/42_netpractice/assets/44573387/00edbc8d-0d4d-4676-a547-6ad16cb374cd)
```
Сеть справа (от хоста А до роутера) настраиваем как обычно (на свитч внимание не обращаем).
Маска у нас 255.255.255.128, IP 40.254.97.227, что входит в подсеть .128-.255 (40.254.97.128-40.254.97.255)
В таблице маршрутизации справа ставим адрес роутера (IP interface R1)
В таблице маршрутизации интернета ставим адрес подсети, которую нам надо найти 40.254.97.128/25,
что соответствует диапазону 40.254.97.128-40.254.97.255 (25 - это CIDR от маски 255.255.255.128)
```
Решение:
![image](https://github.com/annfike/42_netpractice/assets/44573387/4a319fe3-fcf5-4575-b746-56f2885ba304)

</details>

<details>
<summary>
Level 7
</summary>
  
### Level 7
![image](https://github.com/annfike/42_netpractice/assets/44573387/335eeebf-7169-4876-9465-45c159b81657)
```
Здесь у нас три сети: от А до роутера R1, от роутера R1 до роутера R2 и от роутера R2 до С.
Адреса всех трех сетей не должны пересекаться.
Маску можем выбирать любую, берем 255.255.255.252, с самым маленьким диапазоном адресов (чтобы было легче считать)
Тогда наши диапазоны будут .0-.3, .4-.7, .252-.255  
В таблицы маршрутизации справа ставим адрес того роутера (interface), через который выходим в другие сети
```
Решение:
![image](https://github.com/annfike/42_netpractice/assets/44573387/ee13a7f2-ce9e-40ec-b529-da0939ce2384)

</details>

<details>
<summary>
Level 8
</summary>
  
### Level 8
![image](https://github.com/annfike/42_netpractice/assets/44573387/9a749320-da00-49c4-b990-47cc3fc48f04)
```
Здесь у нас четыре сети: C-R2, D-R2, R2-R1, R1-интернет.
В таблице маршрутизации интернета написано, что он должен найти адреса в сети 130.3.220.0/26, что означает
диапазон 130.3.220.0-130.3.220.64. В этом диапазоне должны быть все хосты, но сети не должны пересекаться.
Смотрим какие IP нам даны, это 130.3.220.62 (interface R13). Применяем "самую" маленькую маску (255.255.255.252),
занимаем диапазон адресов 60-63 (у interface R21 ставим 130.3.220.61)
D-R2: есть маска 255.255.255.240, можем взять диапазон .0-.15, тогда IP будут 130.3.220.1 и 130.3.220.2
С-R2: по аналогии ставим маску 255.255.255.240, можем взять следующий диапазон .16-.31,
тогда IP будут 130.3.220.17 и 130.3.220.18
В нижних таблицах маршрутизации проставляем IP интэрфейсов, через которые выходим в сеть
В таблице маршрутизации router R1 справа нам нужно поставить адрес interface R21 (через который мы находим C и D),
а слева нам нужно поставить адреса "нижних" сетей, это диапазон .0-.31, для этого подойдет маска 27 (ее шаг равен 32)
И последнее: в таблице маршрутизации интернета поставить справа адрес interface R12.
```
Решение:
![image](https://github.com/annfike/42_netpractice/assets/44573387/22b9d24c-bbe2-438e-bb1f-05e4855e60c7)

</details>

<details>
<summary>
Level 9
</summary>
  
### Level 9
![image](https://github.com/annfike/42_netpractice/assets/44573387/16771065-b61e-4165-a8a3-1f131812c03c)

```
На этом уровне для всех сетей лучше взять адреса, начинающиеся по-разному, чтобы не мучаться с подсчетами:)
Начинаем с сети А-В-R1. Маска 255.255.255.128, что дает нам диапазон .0-.127.
Если использовать данные нам цифры, можно взять 118.199.53.1, 118.199.53.2, 118.199.53.3
Обращайте внимание на мелкие ошибки, например у хоста А изначально стоит 118.198.53.1 и кажется на первый взгляд,
что все правильно, а должно быть 199 вместо 198).
Адреса, начинающиеся на 192, брать нельзя, т.к. это спец адреса для частных сетей, а у нас интернет.
В таблицах маршрутизации всех хостов слева ставим 0.0.0.0/0, справа интерфейс, через который выходим в другую сеть.
R13-R21: маска 255.255.255.252, адреса 23.211.17.254, 23.211.17.254 (и тоже изначально мелкая ошибка, 18 вместо 17)
R23-D1: маска /18 (или 255.255.192.0), адреса 113.35.82.250 и 113.35.82.249
R22-С1: ставим что хотим (но не адреса с началом 10, это спец адреса). Я взяла маску 252 и адреса 9...
И последнее - таблицы маршрутизации.
router R1: справа ставим адрес interface R21, а слева те сети, которые мы через этот интерфейс находим (хосты С и D).
У интернета: то же самое плюс верхняя сеть (хосты А и В).
```
Решение:
![image](https://github.com/annfike/42_netpractice/assets/44573387/27998d92-afd9-464a-991b-d5846af3d46d)

</details>

<details>
<summary>
Level 10
</summary>
  
### Level 10
![image](https://github.com/annfike/42_netpractice/assets/44573387/bf43355d-9365-4722-b9d5-805b61e2b8d0)

```
H41-R23: маска 255.255.255.192 (= шаг 64), адреса 166.242.173.129 и 166.242.173.131 (входят в диапазон .128-.191)
H11-H21-R11: маска 255.255.255.128 (= шаг 128), адреса 166.242.173.1, 166.242.173.2, 166.242.173.3 (диапазон 0-127)
R13-R21: маска 255.255.255.252 (= шаг 4), адреса 166.242.173.253 и 166.242.173.254 (диапазон 252-255)
Нам остается свободный диапазон 192-251.
H31-R22: ставим маску 252 и адреса 166.242.173.249 и 166.242.173.250.
И таблицы маршрутизации:
интернет должен найти все адреса (диапазон всех наших сетей 0-255), поэтому ставим 166.242.173.0/24
router R1 через router R2 должен найти нижние сети, для хоста Н4 ставим 166.242.173.128/26, для Н3 166.242.173.248/30.
```
Решение:
![image](https://github.com/annfike/42_netpractice/assets/44573387/e621548c-2c5b-45a5-908f-096be853bace)

</details>

Если есть ошибки - пишите, исправлю, ник в телеге такой же как здесь.





